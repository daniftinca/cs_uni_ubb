<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lab 5</title>
</head>

<body>
<script
        src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>


<style>
    th{
        border: solid 3px black;
    }
    td{
        border: solid 1px black;
        padding: 5px 10px;
        text-align: center;
    }


</style>
<div class="main">
    <table id="myTable">
        <tr>
            <th>Data</th>
            <th>Data</th>
            <th>Data</th>
            <th>Data</th>
            <th>Data</th>
            <th>Delete Current row</th>
            <th>Add new row</th>
        </tr>
        <tr>
            <td>This is some content 1</td>
            <td>This is some content</td>
            <td>This is some content</td>
            <td>This is some content</td>
            <td>This is some content</td>
            <td><button class="delete">Delete Row</button></td>
            <td><button class="add">Add Row Beneath</button></td>
        </tr>
        <tr>
            <td>This is some content 2 </td>
            <td>This is some content</td>
            <td>This is some content</td>
            <td>This is some content</td>
            <td>This is some content</td>
            <td><button class="delete">Delete Row</button></td>
            <td><button class="add">Add Row Beneath</button></td>
        </tr>
        <tr>
            <td>This is some content 3</td>
            <td>This is some content</td>
            <td>This is some content</td>
            <td>This is some content</td>
            <td>This is some content</td>
            <td><button class="delete">Delete Row</button></td>
            <td><button class="add">Add Row Beneath</button></td>
        </tr>
        <tr>
            <td>This is some content 4</td>
            <td>This is some content</td>
            <td>This is some content</td>
            <td>This is some content</td>
            <td>This is some content</td>
            <td><button class="delete">Delete Row</button></td>
            <td><button class="add">Add Row Beneath</button></td>
        </tr>
        <tr>
            <td>This is some content 5</td>
            <td>This is some content</td>
            <td>This is some content</td>
            <td>This is some content</td>
            <td>This is some content</td>
            <td><button class="delete">Delete Row</button></td>
            <td><button class="add">Add Row Beneath</button></td>
        </tr>

    </table>

</div>
<script>
    function insertAtIndex(i) {
        var newRow = "<tr>\n" +
                ""+
            "            <td><input class='newRowInput' type='text' name='col-1' /></td>\n" +
            "            <td><input class='newRowInput' type='text' name='col-2' /></td>\n" +
            "            <td><input class='newRowInput' type='text' name='col-3' /></td>\n" +
            "            <td><input class='newRowInput' type='text' name='col-4' /></td>\n" +
            "            <td><input class='newRowInput' type='text' name='col-5' /></td>\n" +
            "            <td colspan='2'> <button class='submit-row'>Submit</button> </td>\n" +
            "        </tr>";
        if(i === 0) {
            $("#myTable").prepend(newRow);
            return;
        }


        $("#myTable > tbody > tr:nth-child(" + (i) + ")").next().after(newRow);
    }

    function insertContentRowAtIndex(i,data){

        var newRow = "<tr>\n" +
            "            <td>"+data[0]+"</td>\n" +
            "            <td>"+data[1]+"</td>\n" +
            "            <td>"+data[2]+"</td>\n" +
            "            <td>"+data[3]+"</td>\n" +
            "            <td>"+data[4]+"</td>\n" +
            "            <td><button class=\"delete\">Delete Row</button></td>\n" +
            "            <td><button class=\"add\">Add Row Beneath</button></td>\n" +
            "        </tr>";
        if(i === 0) {
            $("#myTable").prepend(newRow);
            return;
        }


        $("#myTable > tbody > tr:nth-child(" + (i) + ")").next().after(newRow);
    }




    $(document).on('click','.delete', function () {
        $(this).parent().parent().remove();
    });

    $(document).on('click','.add',function () {
            var ind = $(this).parent().parent().index();
            insertAtIndex(ind);
    });
    $(document).on('click','.submit-row',function () {
        //console.log("I WAS CLICKED");
        var data = [];
        $(this).parent().parent().children().each(function () {
            var input_elem = $(this).children();
            data.push(input_elem.eq(0).val());

        });

        var ind = $(this).parent().parent().index();
        insertContentRowAtIndex(ind,data);
        $(this).parent().parent().remove();
    });


</script>
</body>
</html>